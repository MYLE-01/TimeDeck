<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TimeDeck Help</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; background: #f9f9f9; color: #333; }
  h1, h2 { color: #2c3e50; }
  h2 { cursor: pointer; margin-top: 20px; background: #ecf0f1; padding: 10px; border-radius: 5px; }
  .section { padding: 10px 20px; display: none; background: #fff; border-left: 4px solid #3498db; margin-bottom: 10px; border-radius: 5px; }
  ul { padding-left: 20px; }
  code { background: #ecf0f1; padding: 2px 4px; border-radius: 3px; font-family: monospace; }
  .highlight { color: #e74c3c; font-weight: bold; }
</style>
</head>
<body>

<h1>TimeDeck Help / Quick Reference</h1>

<h2 onclick="toggleSection('general')">1. General Usage</h2>
<div class="section" id="general">
  <ul>
    <li><strong>Home / Summary Page:</strong> Shows today’s shift summary and entitlements.</li>
    <li><strong>Calendar Page:</strong> Shows shifts for the month with interactive editing.</li>
  </ul>
</div>

<h2 onclick="toggleSection('shifts')">2. Shifts</h2>
<div class="section" id="shifts">
  <ul>
    <li><strong>Shift Types:</strong> <code>Day</code>, <code>Night</code>, <code>Off</code></li>
    <li><strong>Editing:</strong> Double-click a row in the calendar to open the edit modal.</li>
    <li><strong>Extra Entry:</strong> Click “Add/Edit Entry Shift” to insert additional shifts.</li>
  </ul>
</div>

<h2 onclick="toggleSection('hours')">3. Hours / Time Inputs</h2>
<div class="section" id="hours">
  <ul>
    <li>Accepted formats:
      <ul>
        <li>Decimal: <code>12.5</code> → 12 hours 30 mins</li>
        <li>HH:MM: <code>12:30</code></li>
      </ul>
    </li>
    <li><strong>.3 button:</strong> Adds 18 mins to the last row in modals.</li>
  </ul>
</div>

<h2 onclick="toggleSection('employee')">4. Employee Configs</h2>
<div class="section" id="employee">
  <ul>
    <li>Stored in <code>configs/roster_&lt;emp_id&gt;.json</code></li>
    <li>Notes dropdown is loaded from <code>default.json</code> (the <code>notes</code> section).</li>
  </ul>
</div>

<h2 onclick="toggleSection('holidays')">5. Holiday Handling</h2>
<div class="section" id="holidays">
  <ul>
    <li>NZ Holidays are pulled for the current year + next year.</li>
    <li>Subdivision example: <code>holidays.country_holidays('NZ', years=[2025, 2026], subdiv='Taranaki')</code></li>
  </ul>
</div>

<h2 onclick="toggleSection('api')">6. Backend API Endpoints</h2>
<div class="section" id="api">
  <ul>
    <li><code>/update_roster_field</code> → POST updates a single field</li>
    <li><code>/append_roster_entry</code> → POST adds a new shift entry</li>
    <li><code>/save_time_off</code> → POST saves multiple time-off entries</li>
    <li><code>/delete_time_off</code> → POST deletes an entry</li>
  </ul>
</div>

<h2 onclick="toggleSection('troubleshoot')">7. Troubleshooting</h2>
<div class="section" id="troubleshoot">
  <ul>
    <li><span class="highlight">Template Errors:</span> Ensure <code>datetime</code> is passed in <code>TemplateResponse</code>.</li>
    <li><span class="highlight">JS Not Loading:</span> Check for missing modal containers or script order.</li>
    <li><span class="highlight">Invalid Time Input:</span> Must be <code>HH:MM</code> or decimal like <code>12.5</code>.</li>
  </ul>
</div>

<h2 onclick="toggleSection('notes')">8. Notes / Best Practices</h2>
<div class="section" id="notes">
  <ul>
    <li>Test modals with a new date before editing existing entries.</li>
    <li>Keep a backup of <code>default.json</code> and individual <code>roster_*.json</code>.</li>
    <li>Use <code>console.log(...)</code> in JS for debugging dynamic modal behavior.</li>
  </ul>
</div>

<script>
function toggleSection(id) {
  const section = document.getElementById(id);
  section.style.display = section.style.display === 'block' ? 'none' : 'block';
}
</script>

</body>
</html>
